# 画面一覧・画面遷移定義（screens）

## 1. 画面一覧

| ID   | 画面名                         | 役割・目的                                      |
|------|--------------------------------|-----------------------------------------------|
| S-01 | 初回セットアップ画面           | 出生日・出産予定日・表示設定を登録する          |
| S-02 | カレンダー画面（メイン）       | 実月齢・修正月齢を月表示で一覧し、日付を選択する |
| S-03 | 日付詳細シート（モーダル）     | 特定の日付の詳細（実/修・生後日数・記録）を表示・編集 |
| S-04 | できた・頑張った一覧画面       | 記録した「できた・頑張った」を横断的に閲覧する  |
| S-05 | 設定画面                       | 表示上限・年齢形式・生後日数表示などの設定を変更する |

---

## 2. 各画面の仕様

### S-01 初回セットアップ画面

**目的**  
アプリ初回起動時に、年齢計算と表示に必要な最低限の情報を登録する。

**表示項目**

- タイトル：「はじめに」など
- 入力フォーム
  - 出生日（必須・日付ピッカー）
  - 出産予定日（任意・日付ピッカー）
  - 修正月齢表示上限（セレクト）
    - 24か月（既定）
    - 36か月
    - 制限なし
  - 年齢表示形式（セレクト）
    - md（2m4d）
    - ymd（1y2m4d）
- ボタン
  - 保存してはじめる（バリデーションOK時のみ有効）

**挙動**

- 出生日未入力の場合、「保存してはじめる」は押下不可。
- 保存後、設定値を端末内に保存し、S-02 カレンダー画面へ遷移。
- 以降、通常起動時は S-02 から開始（S-01 は出ない）。

**遷移**

- 起動時（初回）：S-01 → 保存成功 → S-02  
- 設定変更は S-05 で行う（S-01 再表示はしない想定）。

---

### S-02 カレンダー画面（メイン）

**目的**  
実月齢・修正月齢をカレンダー形式で表示し、日付詳細や記録機能への入口とする。

**構成**

- ヘッダー
  - 年月表示（例：2026年4月）
  - 前月ボタン（＜）
  - 翌月ボタン（＞）
  - 今日へボタン
  - 右上：メニューアイコン（一覧・設定への入口）

- カレンダー本体
  - 7列×5〜6行のグリッド
  - 各セル：
    - 1行目：日付（1〜31）
    - 2行目：実月齢 `実: <md/ymd>`
    - 3行目：修正月齢 `修: <md/ymd>`（条件により非表示）
    - 記録がある場合：下部に小さな「●」

- フッター
  - 注意書き
    - 「修正月齢の表記は目安です。医療的判断は必ず主治医にご相談ください。」
    - 「データは端末内のみで保存します。」

**挙動**

- 前月／翌月ボタン：
  - 表示月を±1か月移動し、全セルの実/修を再計算して表示。
- 今日へボタン：
  - 今日を含む月にジャンプする（元の月情報は不要）。
- 日付セルタップ：
  - 対象日をS-03 日付詳細シートに渡し、モーダル表示。
- 記録「●」表示条件：
  - その日付に1件以上の Achievement が存在する場合のみ表示。

**遷移**

- S-02 →（日付セルタップ）→ S-03
- S-02 →（メニューアイコン）→ メニュー選択 → S-04 or S-05

---

### S-03 日付詳細シート（モーダル／ボトムシート）

**目的**  
特定の日付に対して、以下を確認・操作できるようにする：
- 実月齢・修正月齢・生後日数
- 「できた／頑張った」の記録表示・追加・編集・削除

**表示項目**

- ヘッダー
  - 対象日（YYYY/MM/DD）
  - 閉じるボタン（× or 下スワイプ）

- 年齢情報ブロック
  - 実月齢：`実: <md/ymd>`
  - 修正月齢：`修: <md/ymd>`（条件により非表示）
  - 生まれてから何日目か（R-013 の設定が ON の場合のみ）

- できた／頑張ったブロック
  - 見出し：「できた・頑張った」
  - 記録がない場合：「この日の記録はありません」のテキスト
  - 記録リスト（ある場合）
    - 各行：
      - 種別バッジ（できた / 頑張った）
      - タイトル
      - メモ（あれば2行程度で省略表示）
  - 「＋記録する」ボタン

**挙動**

- 「＋記録する」押下：
  - 同じシート内で入力フォームを表示するか、別モーダルに切り替え。
  - 入力項目：
    - 種別：できた / 頑張った
    - タイトル（必須）
    - メモ（任意）
  - 保存後：
    - Achievement を追加保存
    - この日付のセルに「●」が反映される
- 記録タップ：
  - 編集・削除ダイアログを表示。
- 削除：
  - 当該 Achievement を削除し、残件数0ならカレンダー側の「●」も消える。
- 閉じる：
  - シートを閉じ、S-02 に戻る（S-02 の状態は維持）。

**遷移**

- S-02 → S-03（対象日をパラメータで渡す）
- S-03 → S-02（閉じる）

---

### S-04 できた・頑張った一覧画面

**目的**  
記録した「できた／頑張った」を、日付横断で一覧し、振り返りできるようにする。

**構成**

- ヘッダー
  - タイトル：「できた・頑張ったの記録」
  - 戻るボタン（← カレンダー画面へ）

- フィルタエリア
  - フィルタボタン：
    - すべて
    - できた
    - 頑張った
  - 現在のフィルタ状態を視覚的に分かるようにする。

- 一覧リスト
  - 日付の降順で表示（新しい記録が上）。
  - 各行：
    - 日付（YYYY/MM/DD）
    - 種別バッジ（できた／頑張った）
    - タイトル（内容の先頭数十文字）
    - タップで S-03（その日付）を開く。

**挙動**

- フィルタ切替：
  - 対象種別のみ表示する（クエリは端末内データから）。
- 行タップ：
  - 対象の Achievement の `date` をキーに S-03 を開き、その日の詳細にスクロールさせる。
- 新規追加：
  - MVPではここからの追加は行わない（閲覧のみ）。

**遷移**

- S-02 →（メニュー→「できた・頑張った一覧」）→ S-04
- S-04 →（戻る）→ S-02
- S-04 →（行タップ）→ S-03（対象日指定）

---

### S-05 設定画面

**目的**  
初回セットアップ後に、表示設定を変更できるようにする。

**構成**

- ヘッダー
  - タイトル：「設定」
  - 戻るボタン（← カレンダー画面へ）

- 設定項目リスト
  - 出産予定日
    - 日付ピッカー（空にもできる）
  - 出生日
    - 日付ピッカー
  - 修正月齢表示上限
    - 24か月 / 36か月 / 制限なし
  - 年齢表示形式
    - md / ymd
  - 生まれてからの日数表示
    - トグルスイッチ（ON/OFF）

- フッター
  - バージョン表示（任意）

**挙動**

- 各項目変更：
  - 変更内容を即時保存（確定ボタンは不要とする）
  - S-02 / S-03 の表示に即反映。
- 戻る：
  - S-02 へ戻る。

**遷移**

- S-02 →（メニュー→設定）→ S-05
- S-05 →（戻る）→ S-02

---

## 3. 画面遷移図（テキスト版）

簡潔な遷移表をテキストで残しておく。

```text
[初回起動]
  S-01 初回セットアップ
    ↓ 保存
  S-02 カレンダー（メイン）

[通常起動]
  S-02 カレンダー

S-02 カレンダー
  ・日付セルタップ → S-03 日付詳細シート
  ・メニュー→「できた・頑張った一覧」 → S-04 一覧
  ・メニュー→「設定」 → S-05 設定

S-03 日付詳細シート
  ・閉じる → S-02 カレンダー

S-04 一覧
  ・戻る → S-02 カレンダー
  ・行タップ → S-03 日付詳細シート（対象日指定）

S-05 設定
  ・戻る → S-02 カレンダー
