項目ID,画面ID,前提条件,入力する値,手順,期待結果
TS-001,S-01,なし,出生日=未入力,「保存してはじめる」を押下する,エラーが表示され、{出生日=未入力} のため保存処理は行われない
TS-002,S-01,なし,"出生日=2025-01-10, 出産予定日=未入力",各項目を入力後「保存してはじめる」を押下する,{出生日=2025-01-10}が保存され、カレンダー画面(S-02)へ遷移する
TS-003,S-01,なし,"出生日=2025-01-10, 出産予定日=2025-03-01",各項目を入力後「保存してはじめる」を押下する,"{出生日=2025-01-10, 出産予定日=2025-03-01} が保存され、S-02 へ遷移する"
TS-004,S-01,なし,修正月齢表示上限=24ヶ月,出生日・予定日を入力し、「保存してはじめる」を押下する,{修正月齢表示上限=24ヶ月} が保存され、S-02 カレンダー表示に反映される
TS-005,S-01,なし,年齢表示形式=md,出生日と年齢形式を入力し、「保存してはじめる」を押下する,{年齢表示形式=md} が保存され、月齢表示が md 表記となる
TS-006,S-01,なし,年齢表示形式=ymd,出生日と年齢形式を入力し、「保存してはじめる」を押下する,{年齢表示形式=ymd} が保存され、月齢表示が ymd 表記となる
TS-007,S-01,なし,出産予定日=未来日（出生日より後）,出生日と予定日を入力し、「保存してはじめる」を押下する,{出産予定日=未来日} として保存され、S-02 に遷移する（未来日を不正とする仕様はないため）
TS-008,S-01,なし,出産予定日=過去日（出生日より前）,出生日と予定日を入力し、「保存してはじめる」を押下する,{出産予定日=過去日} として保存され、S-02 に遷移する（修正月齢ロジック上は有効）
TS-009,S-01,初回起動状態,全項目に値を入力,アプリ再起動後に S-01 が再表示されないことを確認,初回セットアップが完了したため S-02 が表示される（{入力値} が復元された状態）
TS-010,S-01,なし,"出生日=2025-01-10, 出産予定日=null, 上限=null",すべての値を入力後保存する,{上限=null（制限なし）} が保存され、修正月齢が制限なく表示される
項目ID,画面ID,前提条件,入力する値,手順,期待結果
TS-011,S-02,"初回セットアップが完了し S-02 が表示されている","なし","前月ボタン（＜）を押下する","表示月が1か月前に変更され、月内全セルの実月齢・修正月齢が再計算され表示される"
TS-012,S-02,"初回セットアップが完了し S-02 が表示されている","なし","翌月ボタン（＞）を押下する","表示月が1か月後に変更され、全セルの実月齢・修正月齢が再計算され表示される"
TS-013,S-02,"今日の日付が含まれる月以外を表示している","なし","「今日へ」ボタンを押下する","今日を含む月にジャンプし、当日の枠に今日ハイライトが表示される"
TS-014,S-02,"出産予定日が未入力","なし","対象月の任意の日付セルを確認する","修正月齢は常に非表示で、実月齢のみ表示される（予定日未入力のため）"
TS-015,S-02,"実月齢と修正月齢が同じ日付を含む月を表示","なし","該当セルを確認する","修正月齢は非表示となり、実月齢のみ表示される（同値表示禁止ルールによる）"
TS-016,S-02,"修正月齢表示上限=24ヶ月に設定","なし","上限を超えた日付のセルを確認する","該当セルでは修正月齢が非表示になる（入力値={修正月齢表示上限=24ヶ月}）"
TS-017,S-02,"対象日に既存の Achievement が1件以上存在","なし","対象日セルを確認する","セル下部に「●」が表示される（記録ありを示す）"
TS-018,S-02,"Achievement が存在しない日付","なし","該当セルを確認する","「●」は表示されない"
TS-019,S-02,"正常にカレンダーが表示されている","なし","日付セルをタップする","対象日をパラメータとして S-03 日付詳細シートが開く"
TS-020,S-02,"UserSettings に出生日・予定日・上限が保存されている","なし","アプリを再起動しカレンダー表示を確認","保存された設定値に基づき実月齢・修正月齢が正しく表示される（永続化反映）"
TS-021,S-02,"端末のタイムゾーンを日本→海外に変更済み","なし","アプリを再起動して日付表示を確認","カレンダーの日付・実月齢・修正月齢が1日もズレずに表示される（UTC 正規化仕様）"
TS-022,S-02,"前月表示後に翌月へ戻る操作を行う","なし","＜ を押した後 ＞ を押す","元の月に戻り、表示内容は初回と完全に一致する（往復操作で状態破損しない）"
TS-023,S-02,"メニューアイコンが表示されている","なし","メニューアイコンを押下","一覧（S-04）、設定（S-05）に遷移できる選択肢が表示される"
TS-024,S-02,"月の1日に設定された lastViewedMonth を保持している（R-009 実装済み想定）","lastViewedMonth=2026-04-01","アプリを再起動","{lastViewedMonth=2026-04-01} の月が初期表示される"
TS-025,S-02,"カレンダーが正常に表示されている","なし","フッターの注意表示を確認","「修正月齢の表記は目安です」「データは端末内のみ保存」の文言が常に表示されている"
TS-026,S-02,"修正月齢表示形式=md","なし","セルの実月齢・修正月齢を確認する","表示形式が {md} で表示される（例：2m4d）"
TS-027,S-02,"修正月齢表示形式=ymd","なし","セルの実月齢・修正月齢を確認する","表示形式が {ymd} で表示される（例：1y2m4d）"
TS-028,S-02,"出生日と予定日を遠く離れた日付に設定","なし","カレンダーを複数月移動して表示を確認","大きい月齢でも計算が破綻せず、正しい y/m/d 差分が表示される（借用法が適用されている）"
項目ID,画面ID,前提条件,入力する値,手順,期待結果
TS-029,S-03,"カレンダー(S-02)が表示されている","なし","任意の日付セルをタップする","対象日をパラメータとして S-03 がモーダル表示される"
TS-030,S-03,"対象日の実月齢・修正月齢が計算可能","なし","S-03 を開いて年齢情報を確認する","実月齢・修正月齢が正しく表示される（md/ymd 表記は設定値による）"
TS-031,S-03,"出産予定日が未設定","なし","S-03 を開く","修正月齢は常に非表示となる（入力値={予定日未設定}）"
TS-032,S-03,"実月齢=修正月齢となる日付を表示","なし","S-03 を開く","修正月齢は非表示となり、実月齢のみ表示される（同値表示禁止ルール）"
TS-033,S-03,"生まれてからの日数表示=ON","なし","S-03 を開き日数表示の有無を確認","「生まれてから◯日目」が表示される（設定値={ON}）"
TS-034,S-03,"生まれてからの日数表示=OFF","なし","S-03 を開く","日数表示が非表示となる（設定値={OFF}）"
TS-035,S-03,"対象日に「できた」記録が1件以上存在","なし","S-03 を開く","記録一覧に対象日の Achievement が表示される（タイトル・種別が含まれる）"
TS-036,S-03,"対象日に記録が1件もない","なし","S-03 を開く","「この日の記録はありません」と表示される"
TS-037,S-03,"記録の種別 did/tried を入力できる状態","type=did, title=テスト記録, memo=メモあり","「＋記録する」を押し値を入力し保存する","{type=did, title=テスト記録} の新規記録が追加され、S-02のセルに「●」が表示される"
TS-038,S-03,"既存の1件の記録が存在","title=更新後タイトル","既存の記録をタップし編集を行い保存する","{title=更新後タイトル} で記録が更新される（updatedAt が保存される）"
TS-039,S-03,"既存の1件の記録が存在","なし","既存の記録をタップし削除を行う","記録が削除され、同日内の件数が0ならカレンダーの「●」が消える"
TS-040,S-03,"種別=未選択または title=未入力","type=未選択, title=未入力","「保存」を押下する","エラーが表示され保存されない（必須項目エラー）"
TS-041,S-03,"メモ欄が複数行入力可能","memo=100文字程度のテキスト","メモに入力し保存する","{memo=入力値} が保存され、折り返して表示される"
TS-042,S-03,"S-03 が開いた状態","なし","閉じるボタン(×) または 下スワイプ操作を行う","モーダルが閉じられ S-02 に戻る"
TS-043,S-03,"複数件の記録が存在","なし","S-03 の一覧を確認","作成日時の昇順で表示される（仕様基準）"
TS-044,S-03,"type=did と tried の両方が存在","なし","一覧を確認","種別バッジがそれぞれ正しく表示される（できた=did, 頑張った=tried）"
TS-045,S-03,"対象日が今日の日付","なし","S-03 を開く","実月齢・修正月齢・日数が今日基準で正しく表示される"
TS-046,S-03,"予定日より前の日付","なし","S-03 を開く","修正月齢は常に 0d と計算され、{0d} として表示（または非表示ルールに従う）"
TS-047,S-03,"対象日が修正月齢表示上限を超えている","なし","S-03 を開く","修正月齢は非表示となり、実月齢のみ表示される（入力値={上限設定}）"
TS-048,S-03,"既存の記録が複数件あり、S-04から遷移","なし","一覧画面から対象行をタップし S-03 を開く","対象日の記録が表示され、スクロール位置が該当記録付近となる（仕様が不明な場合は“不明”）"
項目ID,画面ID,前提条件,入力する値,手順,期待結果
TS-049,S-04,"S-02 のメニューから一覧画面へ遷移できる状態","なし","S-02 でメニューを開き「できた・頑張った一覧」を選択","S-04 一覧画面が表示され、全記録が日付の降順で並ぶ"
TS-050,S-04,"Achievement が1件も登録されていない","なし","S-04 を開く","「記録がありません」等の初期メッセージが表示される（文言は仕様書では不明のため“不明”）"
TS-051,S-04,"記録が複数件登録されている","なし","一覧の並び順を確認する","日付の降順→同一日付内は createdAt の昇順で表示される（仕様に従う）"
TS-052,S-04,"記録が did / tried の両方で複数件存在","なし","一覧の種別バッジを確認する","種別バッジが {did=できた, tried=頑張った} のルールで正しく表示される"
TS-053,S-04,"複数の記録（日付も種類も混在）が存在","フィルタ=すべて","フィルタ切り替えの初期状態を確認","全種類の記録が表示される（入力値={フィルタ=すべて}）"
TS-054,S-04,"複数の記録が存在し、did のみ複数件含む","フィルタ=できた","「できた」フィルタを押す","type=did の記録のみが一覧に表示される"
TS-055,S-04,"複数の記録が存在し、tried のみ複数件含む","フィルタ=頑張った","「頑張った」フィルタを押す","type=tried の記録のみが一覧に表示される"
TS-056,S-04,"各記録に title が存在","なし","一覧の各行を確認する","日付・種別バッジ・タイトルが1行で表示される（title は先頭数十文字に省略表示）"
TS-057,S-04,"対象日の記録が存在","なし","一覧行をタップ","S-03 日付詳細シートが対象日の状態で開く（遷移パラメータが正しく渡される）"
TS-058,S-04,"大量件数（100件以上）の記録が存在","なし","一覧をスクロールする","画面が破綻せずスムーズにスクロールできる（クラッシュしない）"
TS-059,S-04,"S-04 が正常に表示されている","なし","戻るボタン（←）を押す","S-02 カレンダー画面に戻る"
TS-060,S-04,"type=did と tried の件数が極端に偏っている","フィルタ=できた／頑張った","各フィルタを押す","該当件数のみが表示され、不一致や混在は起きない"
TS-061,S-04,"記録数が1件のみ（did または tried のどちらか）","なし","一覧を確認","1件のみが表示され、フィルタ切替時も正しい表示が行われる"
TS-062,S-04,"記録の title が長文（50文字以上）","なし","一覧表示を確認","title が適切に省略（…）されレイアウトが崩れない"
項目ID,画面ID,前提条件,入力する値,手順,期待結果
TS-063,S-05,"S-02 のメニューが表示されている","なし","メニューから「設定」を選択","S-05 設定画面が表示される"
TS-064,S-05,"UserSettings に birthDate が保存されている","birthDate=2025-01-10","出生日入力欄を開き任意の日付を選択","{birthDate=2025-01-10} が新しい入力値に更新され保存される（即時保存）"s
TS-065,S-05,"dueDate が null の状態","dueDate=2025-03-01 へ変更","出産予定日欄で日付を選択","{dueDate=2025-03-01} が保存され、以後の修正月齢計算に反映される"
TS-066,S-05,"dueDate がセット済みの状態","dueDate=null","出産予定日をクリア（未入力）に変更","{dueDate=null} が保存され、修正月齢が非表示に戻る"
TS-067,S-05,"修正月齢表示上限が 24ヶ月 の状態","showCorrectedUntilMonths=36","上限プルダウンで 36ヶ月 を選択","{上限=36ヶ月} が保存され、S-02/S-03 に即反映される"
TS-068,S-05,"修正月齢表示上限が 36ヶ月 の状態","showCorrectedUntilMonths=null","上限プルダウンで「制限なし」を選択","{上限=null} が保存され、修正月齢が制限なく表示される"
TS-069,S-05,"年齢表示形式=md の状態","ageFormat=ymd","年齢表示形式を ymd に変更","{ageFormat=ymd} が保存され、S-02/S-03 の表示形式が即座に変更される"
TS-070,S-05,"年齢表示形式=ymd の状態","ageFormat=md","年齢表示形式を md に変更","{ageFormat=md} が保存され、表示が md 形式に統一される"
TS-071,S-05,"生まれてからの日数表示=ON の状態","showDaysSinceBirth=OFF","トグルスイッチを OFF に変更","{showDaysSinceBirth=OFF} が保存され、S-03 にて日数表示が非表示となる"
TS-072,S-05,"生まれてからの日数表示=OFF の状態","showDaysSinceBirth=ON","トグルスイッチを ON に変更","{showDaysSinceBirth=ON} が保存され、S-03 で日数表示が表示される"
TS-073,S-05,"S-05 が正常に表示されている","なし","戻るボタン（←）を押す","S-02 カレンダー画面へ戻る"
TS-074,S-05,"設定画面が表示されている","複数項目を連続で変更","出生日→予定日→上限→表示形式 の順に操作","すべての項目が個別に即時保存され、S-02/S-03 の表示が逐次反映される"
TS-075,S-05,"birthDate=未来日にすると不正となる可能性あり","birthDate=2030-01-01","未来日を選択し保存する","仕様に未来日エラーの定義が無いため動作は“不明”と記載（補完禁止）"
TS-076,S-05,"設定項目全てが初回セットアップ完了済み","なし","設定画面を開き項目が正しく初期値表示されているか確認","UserSettings に保存されている値がそのまま表示され、差異がない"
TS-077,S-05,"大量の記録や設定値の変更を行った後","なし","設定画面を開き動作を確認","画面が問題なく表示・操作でき、パフォーマンス低下やクラッシュが起きない"
TS-078,S-05,"S-02 から遷移し直前に月齢表示を確認済み","ageFormat=ymd","設定で md に変更して S-02 に戻る","S-02 のカレンダーが即座に {md} 形式で表示される"
TS-079,S-05,"修正月齢上限=24ヶ月 を確認済み","showCorrectedUntilMonths=36","設定で36ヶ月に変更して S-02 に戻る","上限が {36ヶ月} に変更され、修正月齢の表示/非表示が月跨ぎでも正しく反映される"
TS-080,S-05,"戻る操作ができる状態","なし","スマホの戻るジェスチャーを使用（iOS/Android）","S-02 に戻る（ネイティブ戻る操作にも対応）"
